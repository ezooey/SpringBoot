# 스프링부트 개념정리 10강

- 서블릿 객체의 생명주기

## 2. 서블릿 컨테이너(톰캣)

- 요청을 받을 때 정적인 파일을 요청하면 톰캣 없이 아파치만 실행됨
- 자바 파일을 요청 시에 톰캣이 실행됨
    - url: 자원 접근 (스프링에서 사용 불가)
    - uri: 식별자 접근 (스프링 사용 방식)
        
        → 특정한 파일 요청을 할 수는 없음, 무조건 자바를 거친다.
        

### 톰캣이 객체를 생성하는 방식

- 요청 시 서블릿 객체 최초 생성
    1. init() 호출
    2. service() 호출: 스레드1 생성
        
        → post/get/put/delete 중 어느 것인지 판별하여 해당 메소드 호출
        
    3. 응답 이후 스레드1은 제거되지 않고 남겨둠
- 두 번째 이후 요청 시
    1. 이미 만들어진 서블릿 객체 재사용
    2. init() 호출 불필요
    3. service() 호출로 새로운 스레드2 생성
        
        → stack영역에 각각의 다른 공간이 생성되어 저장되기 때문에 객체는 하나여도 메소드는 따로 사용 가능
        
- 지정한 스레드를 초과했을 경우
    1. 초과한 요청은 대기함
    2. 응답(response)이 끝난 첫 번째 요청 스레드를 종료시킴
    3. 초과한 요청이 끝난 첫 스레드를 재사용함(Pooling 기법)

### 스레드를 다루는 방식

- scale-up: 100명을 처리할 때 스레드 100개(Pooling 기법)
- scale-out: 100명을 처리할 때 스레드10개씩 컴퓨터 10대